{"version":3,"sources":["webpack:///dist/label-segment.js","webpack:///webpack/bootstrap f556758a976c41ec8b8d","webpack:///./index.js","webpack:///./node_modules/linelabel/index.js"],"names":["labelSegment","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","segmentSort","a","b","length","path","maxAngle","labelLength","segments","_linelabel2","default","sort","segment","coords","slice","beginIndex","endIndex","pathLength","ii","p1","p2","Math","sqrt","pow","reverse","value","_linelabel","obj","pts","max_angle_delta","chunks","cur_angles","abmag","bcmag","abx","aby","bcx","bcy","dt","i_start","d_start","beginDistance","endDistance","angles","acos","push"],"mappings":"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","file":"dist/label-segment.js","sourcesContent":["var labelSegment =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = labelSegment;\n\nvar _linelabel = __webpack_require__(1);\n\nvar _linelabel2 = _interopRequireDefault(_linelabel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction segmentSort(a, b) {\n  return b.length - a.length;\n}\n\n/**\n * Considering a given path, maximum angle and label length, this function\n * returns a straight enough subset of the path in correct direction for an\n * upright label.\n *\n * Example:\n * ```js\n * var path = [[20, 33], [40, 31], [60, 30], [80, 31], [100, 33]];\n * var textLength = 50; // Text has a width of 50 pixels\n * var textPath = labelSegment(path, Math.PI / 8, 50);\n * // Now render text along textPath\n * ```\n *\n * @param {Array<Array<number>>} path Path represented by coordinate pairs.\n * @param {number} maxAngle Maximum angle in radians for a suitable segment.\n * @param {number} labelLength Required segment length for the label.\n * @return {Array<Array<number>>|undefined} Path to draw the label along, in the\n * correct direction for an upright label. Returns `undefined` when no suitable\n * subset of the given `path` was found.\n */\nfunction labelSegment(path, maxAngle, labelLength) {\n  var segments = (0, _linelabel2.default)(path, maxAngle).sort(segmentSort);\n  var segment = segments[0];\n  var coords = path.slice(segment.beginIndex, segment.endIndex);\n  var pathLength = 0;\n  for (var i = 1, ii = coords.length; i < ii; ++i) {\n    var p1 = coords[i - 1];\n    var p2 = coords[i];\n    pathLength += Math.sqrt(Math.pow(p2[0] - p1[0], 2) + Math.pow(p2[1] - p1[1], 2));\n    if (pathLength >= labelLength) {\n      if (coords[0][0] > coords[coords.length - 1][0]) {\n        // Make text upright\n        coords.reverse();\n      }\n      return coords;\n    }\n  }\n}\nmodule.exports = exports['default'];\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n/* (DONT EDIT THIS FILE) see template.js instead */\n\n/* array accessor style (default) */\nmodule.exports = function (pts, max_angle_delta) {\n\tvar chunks = [];\n\tvar cur_angles = [null];\n\tvar a, b, c, i = 0, n = 0, d = 0;\n\tvar abmag = 0, bcmag = 0;\n\tvar abx = 0, aby = 0;\n\tvar bcx = 0, bcy = 0;\n\tvar dt = 0;\n\tvar i_start = 0;\n\tvar d_start = 0;\n\n\tif (pts.length < 2) return [];\n\tif (pts.length === 2) {\n\t\td = Math.sqrt(\n\t\t\tMath.pow(pts[1][0] - pts[0][0], 2) +\n\t\t\tMath.pow(pts[1][1] - pts[0][1], 2));\n\n\t\treturn [{\n\t\t\tlength: d,\n\t\t\tbeginIndex: 0,\n\t\t\tbeginDistance: 0,\n\t\t\tendIndex: 2,\n\t\t\tendDistance: d,\n\t\t\tangles: [null, null]\n\t\t}];\n\t}\n\n\tabmag = Math.sqrt(Math.pow(pts[1][0] - pts[0][0], 2) + Math.pow(pts[1][1] - pts[0][1], 2));\n\tfor (i = 1, n = pts.length - 1; i < n; i++) {\n\t\ta = pts[i - 1];\n\t\tb = pts[i];\n\t\tc = pts[i + 1];\n\t\tabx = b[0] - a[0];\n\t\taby = b[1] - a[1];\n\t\tbcx = c[0] - b[0];\n\t\tbcy = c[1] - b[1];\n\t\tbcmag = Math.sqrt(bcx * bcx + bcy * bcy);\n\t\td += abmag;\n\n\t\tdt = Math.acos((abx * bcx + aby * bcy) / (abmag * bcmag));\n\t\tcur_angles.push(dt);\n\t\tif (dt > max_angle_delta) {\n\t\t\tchunks.push({\n\t\t\t\tlength: d - d_start,\n\t\t\t\tbeginDistance: d_start,\n\t\t\t\tbeginIndex: i_start,\n\t\t\t\tendIndex: i + 1,\n\t\t\t\tendDistance: d,\n\t\t\t\tangles: cur_angles\n\t\t\t});\n\t\t\ti_start = i;\n\t\t\td_start = d;\n\t\t\tcur_angles = [dt];\n\t\t}\n\t\tabmag = bcmag;\n\t}\n\n\tcur_angles.push(null);\n\tif (i - i_start > 0) {\n\t\tchunks.push({\n\t\t\tlength: d - d_start + bcmag,\n\t\t\tbeginIndex: i_start,\n\t\t\tbeginDistance: d_start,\n\t\t\tendIndex: i + 1,\n\t\t\tendDistance: d + bcmag,\n\t\t\tangles: cur_angles\n\t\t});\n\t}\n\treturn chunks;\n}\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/label-segment.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f556758a976c41ec8b8d","import linelabel from 'linelabel';\n\nfunction segmentSort(a, b) {\n  return b.length - a.length;\n}\n\n/**\n * Considering a given path, maximum angle and label length, this function\n * returns a straight enough subset of the path in correct direction for an\n * upright label.\n *\n * Example:\n * ```js\n * var path = [[20, 33], [40, 31], [60, 30], [80, 31], [100, 33]];\n * var textLength = 50; // Text has a width of 50 pixels\n * var textPath = labelSegment(path, Math.PI / 8, 50);\n * // Now render text along textPath\n * ```\n *\n * @param {Array<Array<number>>} path Path represented by coordinate pairs.\n * @param {number} maxAngle Maximum angle in radians for a suitable segment.\n * @param {number} labelLength Required segment length for the label.\n * @return {Array<Array<number>>|undefined} Path to draw the label along, in the\n * correct direction for an upright label. Returns `undefined` when no suitable\n * subset of the given `path` was found.\n */\nexport default function labelSegment(path, maxAngle, labelLength) {\n  var segments = linelabel(path, maxAngle).sort(segmentSort);\n  var segment = segments[0];\n  var coords = path.slice(segment.beginIndex, segment.endIndex);\n  var pathLength = 0;\n  for (var i = 1, ii = coords.length; i < ii; ++i) {\n    var p1 = coords[i - 1];\n    var p2 = coords[i];\n    pathLength += Math.sqrt(\n        Math.pow(p2[0] - p1[0], 2) + Math.pow(p2[1] - p1[1], 2));\n    if (pathLength >= labelLength) {\n      if (coords[0][0] > coords[coords.length - 1][0]) {\n        // Make text upright\n        coords.reverse();\n      }\n      return coords;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","/* (DONT EDIT THIS FILE) see template.js instead */\n\n/* array accessor style (default) */\nmodule.exports = function (pts, max_angle_delta) {\n\tvar chunks = [];\n\tvar cur_angles = [null];\n\tvar a, b, c, i = 0, n = 0, d = 0;\n\tvar abmag = 0, bcmag = 0;\n\tvar abx = 0, aby = 0;\n\tvar bcx = 0, bcy = 0;\n\tvar dt = 0;\n\tvar i_start = 0;\n\tvar d_start = 0;\n\n\tif (pts.length < 2) return [];\n\tif (pts.length === 2) {\n\t\td = Math.sqrt(\n\t\t\tMath.pow(pts[1][0] - pts[0][0], 2) +\n\t\t\tMath.pow(pts[1][1] - pts[0][1], 2));\n\n\t\treturn [{\n\t\t\tlength: d,\n\t\t\tbeginIndex: 0,\n\t\t\tbeginDistance: 0,\n\t\t\tendIndex: 2,\n\t\t\tendDistance: d,\n\t\t\tangles: [null, null]\n\t\t}];\n\t}\n\n\tabmag = Math.sqrt(Math.pow(pts[1][0] - pts[0][0], 2) + Math.pow(pts[1][1] - pts[0][1], 2));\n\tfor (i = 1, n = pts.length - 1; i < n; i++) {\n\t\ta = pts[i - 1];\n\t\tb = pts[i];\n\t\tc = pts[i + 1];\n\t\tabx = b[0] - a[0];\n\t\taby = b[1] - a[1];\n\t\tbcx = c[0] - b[0];\n\t\tbcy = c[1] - b[1];\n\t\tbcmag = Math.sqrt(bcx * bcx + bcy * bcy);\n\t\td += abmag;\n\n\t\tdt = Math.acos((abx * bcx + aby * bcy) / (abmag * bcmag));\n\t\tcur_angles.push(dt);\n\t\tif (dt > max_angle_delta) {\n\t\t\tchunks.push({\n\t\t\t\tlength: d - d_start,\n\t\t\t\tbeginDistance: d_start,\n\t\t\t\tbeginIndex: i_start,\n\t\t\t\tendIndex: i + 1,\n\t\t\t\tendDistance: d,\n\t\t\t\tangles: cur_angles\n\t\t\t});\n\t\t\ti_start = i;\n\t\t\td_start = d;\n\t\t\tcur_angles = [dt];\n\t\t}\n\t\tabmag = bcmag;\n\t}\n\n\tcur_angles.push(null);\n\tif (i - i_start > 0) {\n\t\tchunks.push({\n\t\t\tlength: d - d_start + bcmag,\n\t\t\tbeginIndex: i_start,\n\t\t\tbeginDistance: d_start,\n\t\t\tendIndex: i + 1,\n\t\t\tendDistance: d + bcmag,\n\t\t\tangles: cur_angles\n\t\t});\n\t}\n\treturn chunks;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/linelabel/index.js\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}